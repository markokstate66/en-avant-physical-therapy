@page "/book"
@inject IJSRuntime JS
@inject PhysicalTherapy.Web.Services.ContentService ContentService

<PageTitle>Book an Appointment - En Avant Physical Therapy</PageTitle>

<!-- Page Header -->
<section class="page-header">
    <div class="container">
        <h1>Book an Appointment</h1>
        <p>Schedule your free consultation or book a therapy session online.</p>
    </div>
</section>

<!-- Booking Options Section -->
<section class="section booking-section">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="pricing-card h-100">
                            <h4>Free Consultation</h4>
                            <div class="pricing-amount">Free</div>
                            <p class="pricing-period">30 minutes</p>
                            <hr>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Meet our team</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Discuss your concerns</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Tour our facility</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>No obligation</li>
                            </ul>
                            <a href="/contact" class="btn btn-primary w-100">
                                Request Consultation
                            </a>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="pricing-card featured h-100">
                            <h4>Initial Evaluation</h4>
                            <div class="pricing-amount">$200</div>
                            <p class="pricing-period">60 minutes</p>
                            <hr>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Comprehensive assessment</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Personalized treatment plan</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Goal setting with family</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Home exercise program</li>
                            </ul>
                            <a href="@StripePaymentLinks["InitialEvaluation"]" target="_blank" class="btn btn-primary w-100">
                                <i class="bi bi-credit-card me-2"></i>Pay & Book
                            </a>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="pricing-card h-100">
                            <h4>Follow-Up Session</h4>
                            <div class="pricing-amount">$150</div>
                            <p class="pricing-period">45 minutes</p>
                            <hr>
                            <ul class="list-unstyled text-start mb-4">
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Ongoing therapy</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Progress monitoring</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Skill building activities</li>
                                <li class="mb-2"><i class="bi bi-check text-primary me-2"></i>Updated home program</li>
                            </ul>
                            <a href="@StripePaymentLinks["FollowUpSession"]" target="_blank" class="btn btn-outline-primary w-100">
                                <i class="bi bi-credit-card me-2"></i>Pay & Book
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Services -->
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <h3 class="text-center mb-4">Additional Services</h3>
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="pricing-card h-100">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h4>Extended Session</h4>
                                    <p class="text-muted mb-2">60 minutes - Complex cases & sports rehab</p>
                                </div>
                                <div class="pricing-amount" style="font-size: 2rem;">$175</div>
                            </div>
                            <hr>
                            <a href="@StripePaymentLinks["ExtendedSession"]" target="_blank" class="btn btn-outline-primary">
                                <i class="bi bi-credit-card me-2"></i>Pay & Book
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="pricing-card h-100">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h4>Home Visit</h4>
                                    <p class="text-muted mb-2">60 minutes - Therapy at your home</p>
                                </div>
                                <div class="pricing-amount" style="font-size: 2rem;">$225</div>
                            </div>
                            <hr>
                            <a href="@StripePaymentLinks["HomeVisit"]" target="_blank" class="btn btn-outline-primary">
                                <i class="bi bi-credit-card me-2"></i>Pay & Book
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Payment Info Section -->
<section class="section section-light">
    <div class="container">
        <div class="section-title">
            <h2>Secure Online Payment</h2>
            <p>Pay securely with Stripe - credit cards, debit cards, and HSA/FSA accepted.</p>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="row">
                    <div class="col-md-4 mb-4 text-center">
                        <i class="bi bi-shield-lock fs-1 text-primary mb-3"></i>
                        <h5>Secure Payments</h5>
                        <p class="small text-muted">256-bit SSL encryption protects your information</p>
                    </div>
                    <div class="col-md-4 mb-4 text-center">
                        <i class="bi bi-credit-card-2-front fs-1 text-primary mb-3"></i>
                        <h5>Multiple Payment Options</h5>
                        <p class="small text-muted">Visa, Mastercard, Amex, Discover, HSA/FSA</p>
                    </div>
                    <div class="col-md-4 mb-4 text-center">
                        <i class="bi bi-receipt fs-1 text-primary mb-3"></i>
                        <h5>Instant Confirmation</h5>
                        <p class="small text-muted">Receive email confirmation immediately</p>
                    </div>
                </div>
                <div class="text-center mt-3">
                    <img src="https://stripe.com/img/v3/home/twitter.png" alt="Powered by Stripe" style="height: 30px; opacity: 0.7;" onerror="this.style.display='none'">
                    <p class="small text-muted mt-2">Payments securely processed by Stripe</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Insurance Section -->
<section class="section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2>Insurance Coverage</h2>
                <p>We accept most major insurance plans. Contact us to verify your coverage before your appointment.</p>
                <h5>Accepted Insurance:</h5>
                <div class="row mb-3">
                    <div class="col-6">
                        <ul class="list-unstyled">
                            <li><i class="bi bi-check text-primary me-2"></i>Blue Cross Blue Shield</li>
                            <li><i class="bi bi-check text-primary me-2"></i>Aetna</li>
                            <li><i class="bi bi-check text-primary me-2"></i>United Healthcare</li>
                        </ul>
                    </div>
                    <div class="col-6">
                        <ul class="list-unstyled">
                            <li><i class="bi bi-check text-primary me-2"></i>Cigna</li>
                            <li><i class="bi bi-check text-primary me-2"></i>Medicaid</li>
                            <li><i class="bi bi-check text-primary me-2"></i>And more...</li>
                        </ul>
                    </div>
                </div>
                <a href="/contact" class="btn btn-outline-primary">
                    <i class="bi bi-telephone me-2"></i>Verify Insurance Coverage
                </a>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body p-4">
                        <h4 class="mb-3"><i class="bi bi-clock me-2 text-primary"></i>Hours of Operation</h4>
                        <table class="table table-borderless mb-0">
                            <tbody>
                                <tr>
                                    <td>Monday - Friday</td>
                                    <td class="text-end">8:00 AM - 6:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Saturday</td>
                                    <td class="text-end">9:00 AM - 2:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Sunday</td>
                                    <td class="text-end">Closed</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- What to Bring Section -->
<section class="section section-cream">
    <div class="container">
        <div class="section-title">
            <h2>What to Bring</h2>
            <p>To make your first visit smooth and productive, please bring:</p>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-primary me-2"></i>
                                Insurance card (if applicable)
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-primary me-2"></i>
                                Photo ID
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-primary me-2"></i>
                                Referral from physician (if required)
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-primary me-2"></i>
                                List of current medications
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-primary me-2"></i>
                                Any relevant medical records
                            </li>
                            <li class="mb-3">
                                <i class="bi bi-check-circle-fill text-primary me-2"></i>
                                Comfortable clothes for your child
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <h2>Questions About Booking?</h2>
        <p>Our team is here to help you schedule the right appointment for your child.</p>
        <div class="d-flex justify-content-center gap-3 flex-wrap">
            <a href="tel:5551234567" class="btn btn-secondary btn-lg">
                <i class="bi bi-telephone me-2"></i>Call (555) 123-4567
            </a>
            <a href="/contact" class="btn btn-outline-light btn-lg">
                Contact Us Online
            </a>
        </div>
    </div>
</section>

@code {
    // Stripe Payment Links (Test Mode)
    private Dictionary<string, string> StripePaymentLinks = new()
    {
        { "InitialEvaluation", "https://buy.stripe.com/test_6oU6oHcX34k66b86yp6EU00" },
        { "FollowUpSession", "https://buy.stripe.com/test_8x2cN5bSZdUG8jgbSJ6EU01" },
        { "ExtendedSession", "https://buy.stripe.com/test_9B6bJ11el7wi430bSJ6EU02" },
        { "HomeVisit", "https://buy.stripe.com/test_9B63cvcX3bMy9nk3md6EU03" }
    };

    // Stripe Publishable Key (Test Mode)
    private string StripePublishableKey = "pk_test_51SdHt4DXNkziTgeUCro7kOl5GxEsuijkSlvCZ48fTyzBgIbGzYpY9C1yE5LXbFEU8TW9ArKVAhzGtaaYelLwFT3F00VwNMVcFl";
}
